<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nyxo Studio | Developers</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Rajdhani:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        /* --- CORE SETUP --- */
        :root {
            --primary: #00f3ff;
            --secondary: #bc13fe;
            --bg-dark: #050505;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --ease: cubic-bezier(0.23, 1, 0.32, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body, html {
            background-color: var(--bg-dark);
            color: #fff;
            font-family: var(--font-body);
            overflow: hidden; /* Mencegah scroll radial menu */
            height: 100vh;
            width: 100vw;
            position: relative;
        }

        /* --- BACKGROUND LAYERS --- */
        #bg-video {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover; opacity: 0.4; z-index: 0; pointer-events: none;
        }
        .overlay {
            position: fixed; inset: 0; background: radial-gradient(circle at center, transparent 0%, #000 100%);
            z-index: 1; pointer-events: none;
        }

        /* Canvas Partikel */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
        }

        .vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, transparent 20%, #000 90%);
            z-index: -1;
            pointer-events: none;
        }

        /* --- INTRO OVERLAY (OTOMATIS) --- */
        #intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s var(--ease), visibility 0.8s;
        }
        
        #intro-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .loader-content {
            text-align: center;
            width: 80%;
            max-width: 300px;
        }

        .loader-text {
            font-family: 'Orbitron';
            letter-spacing: 3px;
            margin-bottom: 15px;
            font-size: 1.2rem;
            color: var(--primary);
            text-shadow: 0 0 10px var(--primary);
        }

        .loader-bar-bg {
            width: 100%;
            height: 4px;
            background: #222;
            border-radius: 2px;
            overflow: hidden;
        }

        .loader-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--primary));
            box-shadow: 0 0 15px var(--primary);
        }

        /* --- MAIN CONTENT --- */
        #main-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 600px;
            text-align: center;
            z-index: 10;
            padding: 20px;
        }

        /* PROFILE PICTURE */
        .profile-wrapper {
            margin-bottom: 25px;
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 1s var(--ease), transform 1s var(--ease);
        }
        .profile-wrapper.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .profile-pic {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.4);
            animation: pulse-border 3s infinite ease-in-out;
        }

        @keyframes pulse-border {
            0% { box-shadow: 0 0 20px rgba(0, 243, 255, 0.3); border-color: rgba(255,255,255,0.1); }
            50% { box-shadow: 0 0 50px rgba(188, 19, 254, 0.6); border-color: rgba(255,255,255,0.5); }
            100% { box-shadow: 0 0 20px rgba(0, 243, 255, 0.3); border-color: rgba(255,255,255,0.1); }
        }

        /* TEXT */
        h1.glitch-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.2rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: white;
            margin-bottom: 15px;
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 1s var(--ease) 0.3s, transform 1s var(--ease) 0.3s;
        }
        
        h1.glitch-title.visible {
            opacity: 1;
            transform: scale(1);
        }

        .description {
            font-size: 1rem;
            color: #ddd;
            line-height: 1.6;
            margin: 0 auto;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1s var(--ease) 0.6s, transform 1s var(--ease) 0.6s; 
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            background: rgba(0,0,0,0.4);
            padding: 15px;
            border-radius: 12px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .description.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- DRAGGABLE NAVIGATION --- */
        #nav-wrapper {
            position: fixed;
            top: 30px; 
            right: 30px;
            z-index: 1000;
            width: 60px;
            height: 60px;
            touch-action: none;
        }

        .hamburger-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(15px);
            border: 2px solid var(--primary);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.3);
            cursor: grab;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.2s, box-shadow 0.3s, background 0.3s;
            position: relative;
            z-index: 1002;
        }
        
        .hamburger-btn:active {
            cursor: grabbing;
            transform: scale(0.95);
        }

        .hamburger-btn:hover {
            box-shadow: 0 0 25px var(--primary);
            background: rgba(0, 243, 255, 0.1);
        }

        .line {
            width: 26px;
            height: 3px;
            background: white;
            border-radius: 2px;
            transition: all 0.4s var(--ease);
            position: absolute;
        }
        .line.top { transform: translateY(-9px); }
        .line.bottom { transform: translateY(9px); }

        .hamburger-btn.active .line.top { transform: translateY(0) rotate(45deg); }
        .hamburger-btn.active .line.bottom { transform: translateY(0) rotate(-45deg); }
        .hamburger-btn.active .line.middle { opacity: 0; transform: scaleX(0); }

        /* --- RADIAL MENU CONTAINER --- */
        #radial-layer {
            position: absolute;
            top: 30px; 
            left: 30px;
            width: 0;
            height: 0;
            pointer-events: none; 
            z-index: 1001;
        }

        .radial-item {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(20, 20, 20, 0.95);
            border: 1px solid rgba(255,255,255,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0);
            transition: all 0.4s var(--ease);
            pointer-events: auto;
            box-shadow: 0 4px 15px rgba(0,0,0,0.7);
        }

        .radial-item.show {
            opacity: 1;
        }

        .radial-item:hover {
            background: var(--primary);
            border-color: #fff;
            box-shadow: 0 0 25px var(--primary);
            transform: translate(-50%, -50%) scale(1.2) !important;
            z-index: 1003;
        }
        
        .radial-item:hover svg {
            fill: #000;
        }

        .radial-item svg {
            width: 22px;
            height: 22px;
            fill: #fff;
            transition: fill 0.3s;
        }

        .radial-item.back-btn:hover {
            background: var(--secondary);
            box-shadow: 0 0 25px var(--secondary);
        }

        .item-tooltip {
            position: absolute;
            bottom: -25px;
            font-size: 11px;
            color: var(--primary);
            font-weight: bold;
            opacity: 0;
            white-space: nowrap;
            transition: opacity 0.3s;
            background: rgba(0,0,0,0.8);
            padding: 4px 8px;
            border-radius: 4px;
            pointer-events: none;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .radial-item:hover .item-tooltip {
            opacity: 1;
        }

        /* Responsive */
        @media (min-width: 768px) {
            .profile-pic { width: 180px; height: 180px; }
            h1 { font-size: 4rem; }
            .description { font-size: 1.3rem; }
            .radial-item { width: 60px; height: 60px; }
            .radial-item svg { width: 28px; height: 28px; }
        }
    </style>
</head>
<body>

    <!-- Background Layers -->
    <!-- 
      VIDEO FIX: 
      1. Menggunakan src yang stabil.
      2. Menambahkan poster (gambar preview) agar tidak hitam saat loading.
      3. Menggunakan playsinline agar autoplay bekerja di iOS/Android.
    -->
    <!-- Video Background -->
    <video id="bg-video" autoplay muted loop playsinline>
        <source src="https://files.catbox.moe/440px7.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>
    
    <canvas id="particle-canvas"></canvas>
    <div class="vignette"></div>

    <!-- Intro (Otomatis) -->
    <div id="intro-overlay">
        <div class="loader-content">
            <div class="loader-text">LOADING</div>
            <div class="loader-bar-bg">
                <div class="loader-bar" id="loader-bar"></div>
            </div>
        </div>
    </div>

    <!-- Main Profile -->
    <main id="main-content">
        <div class="profile-wrapper" id="profile-wrapper">
            <!-- Foto Profil Unsplash ID -->
            <img src="https://files.catbox.moe/ztnnzm.jpg" alt="Nyxo Profile" class="profile-pic">
        </div>
        
        <h1 class="glitch-title" data-text="NYXO STUDIO">NYXO STUDIO</h1>
        <p class="description" id="profile-desc">
            Hello, my store name is nyxostudio, and my real name is vvy..<br>
            There are no stories here that are truly finished.
Only leftover effort, fading spirit, and small steps forced to keep moving.
Sometimes strong, sometimes not â€” but still going.
        </p>
    </main>

    <!-- Draggable Navigation Wrapper -->
    <div id="nav-wrapper">
        <!-- Radial Items Container -->
        <div id="radial-layer"></div>

        <!-- The Hamburger Button -->
        <div class="hamburger-btn" id="trigger-btn" role="button" aria-label="Menu">
            <span class="line top"></span>
            <span class="line middle"></span>
            <span class="line bottom"></span>
        </div>
    </div>

    <script>
        /* ============================
           1. CONFIG DATA
           ============================ */
        const menuData = {
            level1: [
                { id: 'channel', icon: '<path d="M4 11a9 9 0 0 1 9 9M4 4a16 16 0 0 1 16 16"/>' }, 
                {
  id: 'sosmed',
  icon: '<path d="M18 16a3 3 0 1 0-2.83-4H8.83a3 3 0 1 0 0 2h6.34A3 3 0 0 0 18 16zm0-10a3 3 0 1 0-2.83 4H8.83a3 3 0 1 0 0-2h6.34A3 3 0 0 0 18 6z"/>'
}
            ],
            level2: {
                channel: [
                    { name: 'WA Channel', url: 'https://whatsapp.com/channel/0029VauopJb3AzNYgQXmQj2E', icon: '<path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/>' },
                    { name: 'TG Channel', url: 'https://t.me/vvyci', icon: '<path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>' }
                ],
                sosmed: [
                    { name: 'Contact WA', url: 'https://wa.me/6282327204481', icon: '<path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/>' },
                    { name: 'Contact TG', url: 'https://t.me/vvycu', icon: '<path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>' },
                    { name: 'GitHub', url: '#', icon: '<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>' },
                    { name: 'TikTok', url: '#', icon: '<path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93v6.16c0 2.52-1.12 4.86-2.9 6.23-1.72 1.34-4.03 1.82-6.13 1.25-2.19-.6-3.94-2.26-4.57-4.44-.62-2.12.03-4.46 1.65-6.02 1.52-1.48 3.73-2.13 5.87-1.72v4.06c-1.13-.31-2.39-.16-3.37.53-1.02.71-1.59 1.93-1.48 3.17.11 1.24.88 2.34 2.01 2.86 1.13.52 2.47.32 3.41-.54.94-.86 1.31-2.16 1.26-3.41V.02z"/>' },
                    { name: 'Instagram', url: '#', icon: '<path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>' },
                    { name: 'Store', url: 'https://store.nyxostudio.web.id', icon: '<path d="M16 6V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v2H2v13c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6h-6zm-6-2h4v2h-4V4zM9 18V9l7.5 4L9 18z"/>' }
                ]
            }
        };

        /* ============================
           2. DOM ELEMENTS
           ============================ */
        const introOverlay = document.getElementById('intro-overlay');
        const loaderBar = document.getElementById('loader-bar');
        const profileWrapper = document.getElementById('profile-wrapper');
        const titleEl = document.querySelector('.glitch-title');
        const descEl = document.querySelector('.description');
        const navWrapper = document.getElementById('nav-wrapper');
        const triggerBtn = document.getElementById('trigger-btn');
        const radialLayer = document.getElementById('radial-layer');
        const videoElement = document.getElementById('bg-video');

        /* ============================
           3. VIDEO HANDLING FIX
           ============================ */
        // Event saat video data berhasil dimuat (meski belum diputar sepenuhnya)
        videoElement.addEventListener('loadeddata', () => {
            videoElement.classList.add('loaded');
        });

        // Fallback jika video error/gagal load
        videoElement.addEventListener('error', () => {
            console.log("Video gagal dimuat, menggunakan fallback gambar background.");
            // Jangan menambahkan class 'loaded', biarkan background image CSS yang terlihat
        });

        /* ============================
           4. AUTO LOADING SEQUENCE
           ============================ */
        window.addEventListener('load', () => {
            let progress = 0;
            const target = 100;
            
            function animateLoader() {
                // Kecepatan loading
                progress += Math.random() * 2.5; 
                
                if (progress >= target) {
                    progress = target;
                    loaderBar.style.width = '100%';
                    
                    setTimeout(() => {
                        introOverlay.classList.add('hidden');
                        setTimeout(startApp, 800);
                    }, 500);
                } else {
                    loaderBar.style.width = progress + '%';
                    requestAnimationFrame(animateLoader);
                }
            }
            
            requestAnimationFrame(animateLoader);
        });

        function startApp() {
            setTimeout(() => {
                profileWrapper.classList.add('visible');
            }, 200);

            setTimeout(() => {
                titleEl.classList.add('visible');
            }, 500);

            setTimeout(() => {
                descEl.classList.add('visible');
            }, 900);
        }

        /* ============================
           5. DRAGGABLE NAV LOGIC
           ============================ */
        let isDragging = false;
        let startX, startY, initialLeft, initialTop;

        function startDrag(e) {
            if(e.type === 'mousedown' && e.button !== 0) return;
            
            isDragging = true;
            
            const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
            const clientY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
            
            startX = clientX;
            startY = clientY;
            
            const rect = navWrapper.getBoundingClientRect();
            initialLeft = rect.left;
            initialTop = rect.top;

            triggerBtn.style.cursor = 'grabbing';
            
            if(menuState !== 0) toggleMenu();
        }

        function onDrag(e) {
            if (!isDragging) return;
            e.preventDefault(); 

            const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
            const clientY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;

            const deltaX = clientX - startX;
            const deltaY = clientY - startY;

            let newLeft = initialLeft + deltaX;
            let newTop = initialTop + deltaY;

            const maxLeft = window.innerWidth - navWrapper.offsetWidth;
            const maxTop = window.innerHeight - navWrapper.offsetHeight;

            newLeft = Math.max(0, Math.min(newLeft, maxLeft));
            newTop = Math.max(0, Math.min(newTop, maxTop));

            navWrapper.style.right = 'auto';
            navWrapper.style.bottom = 'auto';
            navWrapper.style.left = newLeft + 'px';
            navWrapper.style.top = newTop + 'px';
        }

        function stopDrag() {
            if(isDragging) {
                isDragging = false;
                triggerBtn.style.cursor = 'grab';
            }
        }

        triggerBtn.addEventListener('mousedown', startDrag);
        window.addEventListener('mousemove', onDrag);
        window.addEventListener('mouseup', stopDrag);

        triggerBtn.addEventListener('touchstart', startDrag, {passive: false});
        window.addEventListener('touchmove', onDrag, {passive: false});
        window.addEventListener('touchend', stopDrag);


        /* ============================
           6. SMART RADIAL MENU LOGIC
           ============================ */
        let menuState = 0; 
        let activeElements = [];

        triggerBtn.addEventListener('click', (e) => {
            toggleMenu();
        });

        function toggleMenu() {
            if (menuState === 0) {
                openLevel1();
            } else if (menuState === 1) {
                closeAll();
            } else if (menuState === 2) {
                backToLevel1();
            }
        }

        function openLevel1() {
            menuState = 1;
            triggerBtn.classList.add('active');
            renderItems(menuData.level1, 'level1');
        }

        function getSafeDirection() {
            const rect = navWrapper.getBoundingClientRect();
            const btnCenterX = rect.left + rect.width / 2;
            const btnCenterY = rect.top + rect.height / 2;
            const screenCenterX = window.innerWidth / 2;
            const screenCenterY = window.innerHeight / 2;
            
            const angleToCenter = Math.atan2(screenCenterY - btnCenterY, screenCenterX - btnCenterX);
            return angleToCenter; 
        }

        function renderItems(items, type) {
            if (activeElements.length > 0) {
                clearItems(() => {
                    createItems(items, type);
                });
            } else {
                createItems(items, type);
            }
        }

        function createItems(items, type) {
            const total = items.length;
            const isMobile = window.innerWidth < 768;
            const radius = isMobile ? 80 : 130; 

            const baseAngle = getSafeDirection();
            const spreadRad = (total > 3) ? 1.2 : 0.8;
            
            const startAngle = baseAngle - spreadRad;
            const step = (spreadRad * 2) / (total - 1 || 1);

            items.forEach((item, index) => {
                const btn = document.createElement('div');
                btn.className = 'radial-item';
                
                if (item.isBack) {
                    btn.classList.add('back-btn');
                }

                const currentAngle = startAngle + (index * step);
                const x = radius * Math.cos(currentAngle);
                const y = radius * Math.sin(currentAngle);

                let iconHtml = `<svg viewBox="0 0 24 24">${item.icon}</svg>`;
                
                const label = item.name || (item.id && item.id.toUpperCase()) || '';
                if(label) iconHtml += `<div class="item-tooltip" style="${getTooltipStyle(currentAngle)}">${label}</div>`;

                btn.innerHTML = iconHtml;

                btn.onclick = (e) => {
                    e.stopPropagation();
                    handleItemClick(item, type);
                };

                radialLayer.appendChild(btn);

                activeElements.push({
                    el: btn,
                    x: x,
                    y: y
                });

                requestAnimationFrame(() => {
                    setTimeout(() => {
                        btn.classList.add('show');
                        btn.style.transform = `translate(calc(-50% + ${x}px), calc(-50% + ${y}px)) scale(1)`;
                    }, index * 50);
                });
            });
        }

        function getTooltipStyle(angleRad) {
            const deg = angleRad * (180 / Math.PI);
            if (deg > 90 && deg < 270) return 'top: 100%; bottom: auto;';
            return 'bottom: 100%; top: auto;';
        }

        function handleItemClick(item, type) {
            if (type === 'level1') {
                const subData = menuData.level2[item.id];
                if (subData) {
                    menuState = 2;
                    const backItem = {
                        isBack: true,
                        icon: '<path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>'
                    };
                    renderItems([backItem, ...subData], 'level2');
                }
            } else if (type === 'level2') {
                if (item.isBack) {
                    backToLevel1();
                } else {
                    if(item.url) {
                        window.open(item.url, '_blank'); 
                    }
                }
            }
        }

        function backToLevel1() {
            menuState = 1;
            renderItems(menuData.level1, 'level1');
        }

        function closeAll() {
            menuState = 0;
            triggerBtn.classList.remove('active');
            clearItems();
        }

        function clearItems(callback) {
            activeElements.forEach(item => {
                item.el.classList.remove('show');
                item.el.style.transform = `translate(-50%, -50%) scale(0)`;
            });

            setTimeout(() => {
                radialLayer.innerHTML = '';
                activeElements = [];
                if (callback) callback();
            }, 400);
        }

        /* ============================
           7. PARTICLE SYSTEM
           ============================ */
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2;
                this.speedX = Math.random() * 0.4 - 0.2;
                this.speedY = Math.random() * 0.4 - 0.2;
                this.opacity = Math.random() * 0.5 + 0.1;
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.x > canvas.width) this.x = 0;
                if (this.x < 0) this.x = canvas.width;
                if (this.y > canvas.height) this.y = 0;
                if (this.y < 0) this.y = canvas.height;
            }
            draw() {
                ctx.fillStyle = `rgba(0, 243, 255, ${this.opacity})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function initParticles() {
            for (let i = 0; i < 40; i++) {
                particles.push(new Particle());
            }
        }

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                p.update();
                p.draw();
            });
            requestAnimationFrame(animateParticles);
        }

        initParticles();
        animateParticles();

    </script>
</body>
    </html>
